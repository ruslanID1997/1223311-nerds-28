var button=document.querySelector(".button-write-window"),modal=document.querySelector("#request-form"),closebutton=modal.querySelector(".button-close"),form=modal.querySelector(".request-text"),nameInput=form.querySelector("#request-text-name"),emailInput=form.querySelector("#request-text-email"),messageInput=form.querySelector("#request-text-message"),isStorageSupport=!0,nameStorage="",emailStorage="",messageStorage="";try{nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email"),messageStorage=localStorage.getItem("text")}catch(e){isStorageSupport=!1}function closeModal(){modal.classList.remove("modal-show"),nameInput.classList.remove("invalid"),emailInput.classList.remove("invalid"),messageInput.classList.remove("invalid"),isStorageSupport&&(localStorage.setItem("name",nameInput.value),localStorage.setItem("email",emailInput.value),localStorage.setItem("text",messageInput.value))}button.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),nameStorage&&(nameInput.value=nameStorage),emailStorage&&(emailInput.value=emailStorage),nameInput.value?emailInput.value?messageInput.focus():emailInput.focus():nameInput.focus()}),form.addEventListener("submit",function(e){nameInput.value?nameInput.classList.remove("invalid"):(e.preventDefault(),nameInput.classList.add("invalid")),emailInput.value?emailInput.classList.remove("invalid"):(e.preventDefault(),emailInput.classList.add("invalid")),messageInput.value?messageInput.classList.remove("invalid"):(e.preventDefault(),messageInput.classList.add("invalid"))}),closebutton.addEventListener("click",function(e){e.preventDefault(),closeModal()}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),closeModal())});