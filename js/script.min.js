var button=document.querySelector(".button-write-window"),modal=document.querySelector("#request-form"),form=modal.querySelector(".request-text"),closebutton=modal.querySelector(".button-close"),nameInput=form.querySelector("#request-text-name"),emailInput=form.querySelector("#request-text-email"),messageInput=form.querySelector("#request-text-message");try{nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}function closeModal(){modal.classList.remove("modal-show"),modal.classList.remove("modal-error"),nameInput.classList.remove("invalid"),emailInput.classList.remove("invalid"),isStorageSupport&&(localStorage.setItem("name",nameInput.value),localStorage.setItem("email",emailInput.value))}button.addEventListener("click",function(e){e.preventDefault(),modal.classList.add("modal-show"),nameStorage&&(nameInput.value=nameStorage),emailStorage&&(emailInput.value=emailStorage),nameInput.value?emailInput.value?messageInput.focus():emailInput.focus():nameInput.focus()}),form.addEventListener("submit",function(e){nameInput.value?nameInput.classList.remove("invalid"):(e.preventDefault(),modal.classList.remove("modal-error"),modal.offsetWidth,modal.classList.add("modal-error"),nameInput.classList.add("invalid")),emailInput.value?emailInput.classList.remove("invalid"):(e.preventDefault(),emailInput.classList.add("invalid"))}),closebutton.addEventListener("click",function(e){e.preventDefault(),closeModal()}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal.classList.contains("modal-show")&&(e.preventDefault(),modal.classList.remove("modal-show"),modal.classList.remove("modal-error"),e.preventDefault())});